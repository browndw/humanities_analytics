<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.557">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Methods in Humanities Analytics - 4&nbsp; Distributions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../tutorials/keyness.html" rel="next">
<link href="../tutorials/spacy-basics.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/text_analysis.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Methods in Humanities Analytics</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/browndw/humanities_analytics" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../tutorials/sentiment-and-syuzhet.html">Foundations</a></li><li class="breadcrumb-item"><a href="../tutorials/frequency-and-distributions.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Distributions</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/sentiment-and-syuzhet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Texts, Algorithms, and Black-Boxes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/corpus-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Corpus Basics: Tokenization and Processing Pipelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/spacy-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">NLP Processing with spaCy</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/frequency-and-distributions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Distributions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Core Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/keyness.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Keyness</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/collocations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Collocations and N-grams</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/time-series.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Time Series Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/topic-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Topic Modeling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Advanced Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/categorical-variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">ANOVA and R²: Comparing Groups and Explaining Variance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/cluster-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Clustering Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/correlations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Correlation and Multi-Collinearity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/multi-dimensional-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Multi-Dimensional Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/contextual-embeddings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Contextual Embeddings and Transformers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/classification-federalist-papers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Classification &amp; Authorship Attribution</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Reports</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reports/cbe_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coffee Break Experiment #1: From Curiosity to Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reports/cbe_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coffee Break Experiment #2: From Results to Research</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reports/cbe_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coffee Break Experiment #3: Final Project Pilot Study</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reports/final-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project: Independent Corpus Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reports/statistical-reporting-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Reporting Guide</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Course Resources</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/using-colab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Using Google Colab</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Packages for This Course</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Data Resources</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#prepare-a-corpus" id="toc-prepare-a-corpus" class="nav-link active" data-scroll-target="#prepare-a-corpus"><span class="header-section-number">4.1</span> Prepare a corpus</a>
  <ul class="collapse">
  <li><a href="#load-the-needed-packages" id="toc-load-the-needed-packages" class="nav-link" data-scroll-target="#load-the-needed-packages"><span class="header-section-number">4.1.1</span> Load the needed packages</a></li>
  <li><a href="#load-a-corpus" id="toc-load-a-corpus" class="nav-link" data-scroll-target="#load-a-corpus"><span class="header-section-number">4.1.2</span> Load a corpus</a></li>
  <li><a href="#load-the-spacy-model" id="toc-load-the-spacy-model" class="nav-link" data-scroll-target="#load-the-spacy-model"><span class="header-section-number">4.1.3</span> Load the spaCy model</a></li>
  </ul></li>
  <li><a href="#document-variables-name-your-files-systematically" id="toc-document-variables-name-your-files-systematically" class="nav-link" data-scroll-target="#document-variables-name-your-files-systematically"><span class="header-section-number">4.2</span> Document variables (Name your files systematically!)</a></li>
  <li><a href="#create-a-frequency-table" id="toc-create-a-frequency-table" class="nav-link" data-scroll-target="#create-a-frequency-table"><span class="header-section-number">4.3</span> Create a frequency table</a></li>
  <li><a href="#some-properties-of-token-frequencies" id="toc-some-properties-of-token-frequencies" class="nav-link" data-scroll-target="#some-properties-of-token-frequencies"><span class="header-section-number">4.4</span> Some properties of token frequencies</a>
  <ul class="collapse">
  <li><a href="#zipfs-law" id="toc-zipfs-law" class="nav-link" data-scroll-target="#zipfs-law"><span class="header-section-number">4.4.1</span> Zipf’s Law</a></li>
  </ul></li>
  <li><a href="#dispersions" id="toc-dispersions" class="nav-link" data-scroll-target="#dispersions"><span class="header-section-number">4.5</span> Dispersions</a></li>
  <li><a href="#create-a-document-feature-matrix" id="toc-create-a-document-feature-matrix" class="nav-link" data-scroll-target="#create-a-document-feature-matrix"><span class="header-section-number">4.6</span> Create a document-feature matrix</a>
  <ul class="collapse">
  <li><a href="#using-document-feature-matrices" id="toc-using-document-feature-matrices" class="nav-link" data-scroll-target="#using-document-feature-matrices"><span class="header-section-number">4.6.1</span> Using document-feature matrices</a></li>
  <li><a href="#aggregating-by-text-type" id="toc-aggregating-by-text-type" class="nav-link" data-scroll-target="#aggregating-by-text-type"><span class="header-section-number">4.6.2</span> Aggregating by text type</a></li>
  </ul></li>
  <li><a href="#common-pitfalls" id="toc-common-pitfalls" class="nav-link" data-scroll-target="#common-pitfalls"><span class="header-section-number">4.7</span> Common Pitfalls</a></li>
  <li><a href="#discussion-questions" id="toc-discussion-questions" class="nav-link" data-scroll-target="#discussion-questions"><span class="header-section-number">4.8</span> Discussion Questions</a></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways"><span class="header-section-number">4.9</span> Key Takeaways</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">4.10</span> Further Reading</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/browndw/humanities_analytics/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../tutorials/sentiment-and-syuzhet.html">Foundations</a></li><li class="breadcrumb-item"><a href="../tutorials/frequency-and-distributions.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Distributions</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Distributions</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><a target="_blank" href="https://colab.research.google.com/github/browndw/humanities_analytics/blob/main/mini_labs/Mini_Lab_03_Frequencies.ipynb"> <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"> </a></p>
<section id="prepare-a-corpus" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="prepare-a-corpus"><span class="header-section-number">4.1</span> Prepare a corpus</h2>
<section id="load-the-needed-packages" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="load-the-needed-packages"><span class="header-section-number">4.1.1</span> Load the needed packages</h3>
<div id="b8af41fb" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> great_tables <span class="im">import</span> GT</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> docuscospacy.corpus_analysis <span class="im">as</span> ds</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spacy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-a-corpus" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="load-a-corpus"><span class="header-section-number">4.1.2</span> Load a corpus</h3>
<p>The repository comes with data sets for practice. The conventional way to format text data prior to processing is as a table with a column of document ids (which correspond to file names) and a column of texts.</p>
<p>We’ll load a sample corpus from a URL:</p>
<div id="30903207" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://github.com/browndw/humanities_analytics/raw/refs/heads/main/data/data_tables/sample_corpus.parquet"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sample_corpus <span class="op">=</span> pl.read_parquet(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To peek at the data, we’ll look at the first 100 characters in the “text” column:</p>
<div id="0ec4d9d8" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sample_corpus.with_columns(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"text"</span>).<span class="bu">str</span>.<span class="bu">slice</span>(<span class="dv">0</span>, <span class="dv">100</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>).head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 2)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">doc_id</th>
<th data-quarto-table-cell-role="th">text</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"acad_01"</td>
<td>"Teachers and other school pers…</td>
</tr>
<tr class="even">
<td>"acad_02"</td>
<td>"Abstract Does the conflict in …</td>
</tr>
<tr class="odd">
<td>"acad_03"</td>
<td>"January 17, 1993, will mark th…</td>
</tr>
<tr class="even">
<td>"acad_04"</td>
<td>"Thirty years have passed since…</td>
</tr>
<tr class="odd">
<td>"acad_05"</td>
<td>"ABSTRACT -- A common property …</td>
</tr>
<tr class="even">
<td>"acad_06"</td>
<td>"Despite some encouraging signs…</td>
</tr>
<tr class="odd">
<td>"acad_07"</td>
<td>"evaluation component. Similarl…</td>
</tr>
<tr class="even">
<td>"acad_08"</td>
<td>"Section: Education "A lab is w…</td>
</tr>
<tr class="odd">
<td>"acad_09"</td>
<td>"In 1968, the thirtieth anniver…</td>
</tr>
<tr class="even">
<td>"acad_10"</td>
<td>"monologue -- and of Novas Calv…</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="load-the-spacy-model" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="load-the-spacy-model"><span class="header-section-number">4.1.3</span> Load the spaCy model</h3>
<p>We’ll use the DocuScope-tagged spaCy model for tokenization and tagging:</p>
<div id="50762d81" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>nlp <span class="op">=</span> spacy.load(<span class="st">"en_docusco_spacy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And process the corpus:</p>
<div id="95107b6b" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ds_tokens <span class="op">=</span> ds.docuscope_parse(sample_corpus, nlp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performance: Corpus processing completed in 68.78s</code></pre>
</div>
</div>
<p>Check the result:</p>
<div id="dc847143" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ds_tokens.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 6)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">doc_id</th>
<th data-quarto-table-cell-role="th">token</th>
<th data-quarto-table-cell-role="th">pos_tag</th>
<th data-quarto-table-cell-role="th">ds_tag</th>
<th data-quarto-table-cell-role="th">pos_id</th>
<th data-quarto-table-cell-role="th">ds_id</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>u32</th>
<th>u32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"acad_01"</td>
<td>"Teachers "</td>
<td>"NN2"</td>
<td>"Character"</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>"acad_01"</td>
<td>"and "</td>
<td>"CC"</td>
<td>"Untagged"</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td>"acad_01"</td>
<td>"other "</td>
<td>"JJ"</td>
<td>"InformationTopics"</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="even">
<td>"acad_01"</td>
<td>"school "</td>
<td>"NN1"</td>
<td>"InformationTopics"</td>
<td>4</td>
<td>3</td>
</tr>
<tr class="odd">
<td>"acad_01"</td>
<td>"personnel "</td>
<td>"NN2"</td>
<td>"Character"</td>
<td>5</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="document-variables-name-your-files-systematically" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="document-variables-name-your-files-systematically"><span class="header-section-number">4.2</span> Document variables (Name your files systematically!)</h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>File names can encode important meta-data. In this case, the names include text-types, much like the <a href="https://www.english-corpora.org/coca/help/texts.asp">Corpus of Contemporary American English</a>.</p>
<p>This is <strong>extremely important</strong>. When you build your own corpora, you want to purposefully and systematically name your files and organize your directories. This will save you time and effort later in your analysis.</p>
</div>
</div>
<p>We can extract the meta-data from the file names using polars string operations. Notice how the <code>doc_id</code> values start with prefixes like “acad” or “fic”. We can extract those:</p>
<div id="3bfa6678" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sample_corpus.select(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"doc_id"</span>).<span class="bu">str</span>.extract(<span class="vs">r"^([a-z]+)"</span>, <span class="dv">1</span>).alias(<span class="st">"text_type"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>).unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (8, 1)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">text_type</th>
</tr>
<tr class="odd">
<th>str</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"spok"</td>
</tr>
<tr class="even">
<td>"fic"</td>
</tr>
<tr class="odd">
<td>"acad"</td>
</tr>
<tr class="even">
<td>"web"</td>
</tr>
<tr class="odd">
<td>"news"</td>
</tr>
<tr class="even">
<td>"tvm"</td>
</tr>
<tr class="odd">
<td>"mag"</td>
</tr>
<tr class="even">
<td>"blog"</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>This meta-data is already embedded in our tokens table via the <code>doc_id</code> column, so we can use it for grouping and filtering in our analyses.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why This Matters
</div>
</div>
<div class="callout-body-container callout-body">
<p>Frequency analysis is foundational to corpus linguistics and computational text analysis. Understanding word distributions helps us:</p>
<ul>
<li><strong>Identify patterns</strong>: What words characterize a text type or author?</li>
<li><strong>Make comparisons</strong>: How does academic writing differ from fiction?</li>
<li><strong>Detect anomalies</strong>: Are certain words unusually common or rare?</li>
<li><strong>Inform decisions</strong>: Should we remove stopwords? Weight by frequency?</li>
</ul>
<p>But frequency alone can be misleading—a word might be common because it appears many times in one document, or because it appears once in every document. This is why we need <strong>dispersion measures</strong> alongside frequency counts.</p>
</div>
</div>
</section>
<section id="create-a-frequency-table" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="create-a-frequency-table"><span class="header-section-number">4.3</span> Create a frequency table</h2>
<p>The <code>frequency_table()</code> function creates a comprehensive summary of token frequencies across our corpus:</p>
<div id="6de840b8" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wc <span class="op">=</span> ds.frequency_table(ds_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check the result:</p>
<div id="a44aee14" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>wc.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 5)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Token</th>
<th data-quarto-table-cell-role="th">Tag</th>
<th data-quarto-table-cell-role="th">AF</th>
<th data-quarto-table-cell-role="th">RF</th>
<th data-quarto-table-cell-role="th">Range</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
<th>u32</th>
<th>f64</th>
<th>f64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"the"</td>
<td>"AT"</td>
<td>51032</td>
<td>49493.494717</td>
<td>100.0</td>
</tr>
<tr class="even">
<td>"and"</td>
<td>"CC"</td>
<td>25285</td>
<td>24522.711513</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td>"of"</td>
<td>"IO"</td>
<td>22524</td>
<td>21844.949737</td>
<td>100.0</td>
</tr>
<tr class="even">
<td>"a"</td>
<td>"AT1"</td>
<td>21998</td>
<td>21334.807509</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td>"to"</td>
<td>"TO"</td>
<td>16514</td>
<td>16016.13834</td>
<td>100.0</td>
</tr>
<tr class="even">
<td>"in"</td>
<td>"II"</td>
<td>15694</td>
<td>15220.85958</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td>"i"</td>
<td>"PPIS1"</td>
<td>15431</td>
<td>14965.788466</td>
<td>100.0</td>
</tr>
<tr class="even">
<td>"it"</td>
<td>"PPH1"</td>
<td>12860</td>
<td>12472.298598</td>
<td>100.0</td>
</tr>
<tr class="odd">
<td>"you"</td>
<td>"PPY"</td>
<td>12448</td>
<td>12072.719514</td>
<td>100.0</td>
</tr>
<tr class="even">
<td>"is"</td>
<td>"VBZ"</td>
<td>10565</td>
<td>10246.487923</td>
<td>100.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The frequency table contains columns for:</p>
<ul>
<li><code>Token</code>: The word or token</li>
<li><code>AF</code>: Absolute frequency (total count across all documents)</li>
<li><code>RF</code>: Relative frequency (per million tokens)</li>
<li><code>Range</code>: Number of documents containing the token</li>
<li><code>DP</code>: Deviation of Proportions (dispersion measure)</li>
</ul>
</section>
<section id="some-properties-of-token-frequencies" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="some-properties-of-token-frequencies"><span class="header-section-number">4.4</span> Some properties of token frequencies</h2>
<p>Just glancing at the top of the frequency table, a couple of things are obvious. The first is that on their own, frequencies aren’t obviously interpretable. The most frequent words in most English language corpora will look much like this one—dominated by function words like <em>the</em>, <em>of</em>, and <em>and</em>.</p>
<section id="zipfs-law" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="zipfs-law"><span class="header-section-number">4.4.1</span> Zipf’s Law</h3>
<p>Another fundamental property of word (or token) frequencies is called <a href="https://en.wikipedia.org/wiki/Zipf%27s_law">Zipf’s Law</a>. To get a sense of what it is and its implications, let’s create a simple plot.</p>
<p>We’ll add a row index (which we’ll call <code>rank</code>) and take the first 250 rows:</p>
<div id="213cd075" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> wc.with_row_index(<span class="st">"rank"</span>, offset<span class="op">=</span><span class="dv">1</span>).head(<span class="dv">250</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we can use matplotlib to create a simple scatter plot of rank vs.&nbsp;absolute frequency:</p>
<div id="142c7271" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> plot_df.select(<span class="st">"rank"</span>).to_numpy()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> plot_df.select(<span class="st">"AF"</span>).to_numpy()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Token rank'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Token frequency'</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Zipf's Law"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="frequency-and-distributions_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The steep power-law curve you’re seeing—where a small number of tokens account for the vast majority of occurrences—holds true for almost any corpus. This is <strong>Zipf’s Law</strong>: the frequency of any word is inversely proportional to its rank in the frequency table. The most common word appears roughly twice as often as the second most common word, three times as often as the third most common word, and so on.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why Zipf’s Law Matters
</div>
</div>
<div class="callout-body-container callout-body">
<p>This distribution has profound implications for text analysis:</p>
<ol type="1">
<li><strong>Common tokens dominate</strong>: The top 100 words often account for 50%+ of all tokens</li>
<li><strong>Long tail of rare words</strong>: Most unique words appear only a few times</li>
<li><strong>Statistical challenges</strong>: Many standard statistical methods assume normal distributions, not power laws</li>
<li><strong>Sampling concerns</strong>: Even large corpora may have insufficient data for rare words</li>
</ol>
<p>Understanding this distribution helps us choose appropriate analysis methods and interpret results correctly.</p>
</div>
</div>
</section>
</section>
<section id="dispersions" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="dispersions"><span class="header-section-number">4.5</span> Dispersions</h2>
<p>One fundamental question we might have when looking at token frequencies is: what is driving the frequency of a given token?</p>
<p>For example, let’s say we find that <em>raccoon</em> is particularly frequent in our data. Does that mean we have a particularly raccoon-heavy set of texts? Or is it that 1 or 2 texts are all about raccoons while the rest never mention them?</p>
<p>For this reason, we might want to know how <strong>dispersed</strong> tokens are. One simple way to report this is to see what percentage of our texts a given token appears in.</p>
<p>The limitation to this approach is that our corpus may not contain texts of equal length. If some are shorter than others, the opportunity for a token to appear will not be equal.</p>
<p>Thus there are a variety of dispersion measures available. Some of these can be calculated using the <code>dispersions_table()</code> function. For this, we simply pass our original tokens object to the function:</p>
<div id="7becb907" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> ds.dispersions_table(ds_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that for some dispersion measures, the higher value means that the token is more dispersed:</p>
<div id="96c12a90" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dt.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 11)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Token</th>
<th data-quarto-table-cell-role="th">Tag</th>
<th data-quarto-table-cell-role="th">AF</th>
<th data-quarto-table-cell-role="th">RF</th>
<th data-quarto-table-cell-role="th">Carrolls_D2</th>
<th data-quarto-table-cell-role="th">…</th>
<th data-quarto-table-cell-role="th">Lynes_D3</th>
<th data-quarto-table-cell-role="th">DC</th>
<th data-quarto-table-cell-role="th">Juillands_D</th>
<th data-quarto-table-cell-role="th">DP</th>
<th data-quarto-table-cell-role="th">DP_norm</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
<th>u64</th>
<th>f64</th>
<th>f64</th>
<th>…</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"the"</td>
<td>"AT"</td>
<td>51032</td>
<td>49493.494717</td>
<td>0.988606</td>
<td>…</td>
<td>0.967496</td>
<td>0.962878</td>
<td>0.981737</td>
<td>0.143405</td>
<td>0.143702</td>
</tr>
<tr class="even">
<td>"and"</td>
<td>"CC"</td>
<td>25285</td>
<td>24522.711513</td>
<td>0.990274</td>
<td>…</td>
<td>0.973234</td>
<td>0.967056</td>
<td>0.983422</td>
<td>0.125533</td>
<td>0.125794</td>
</tr>
<tr class="odd">
<td>"of"</td>
<td>"IO"</td>
<td>22524</td>
<td>21844.949737</td>
<td>0.979403</td>
<td>…</td>
<td>0.938009</td>
<td>0.9353</td>
<td>0.974667</td>
<td>0.197503</td>
<td>0.197913</td>
</tr>
<tr class="even">
<td>"a"</td>
<td>"AT1"</td>
<td>21998</td>
<td>21334.807509</td>
<td>0.992072</td>
<td>…</td>
<td>0.978803</td>
<td>0.97165</td>
<td>0.985503</td>
<td>0.111006</td>
<td>0.111236</td>
</tr>
<tr class="odd">
<td>"to"</td>
<td>"TO"</td>
<td>16514</td>
<td>16016.13834</td>
<td>0.989978</td>
<td>…</td>
<td>0.973467</td>
<td>0.963931</td>
<td>0.983837</td>
<td>0.122953</td>
<td>0.123208</td>
</tr>
<tr class="even">
<td>"in"</td>
<td>"II"</td>
<td>15694</td>
<td>15220.85958</td>
<td>0.986626</td>
<td>…</td>
<td>0.960228</td>
<td>0.957547</td>
<td>0.979665</td>
<td>0.155209</td>
<td>0.155531</td>
</tr>
<tr class="odd">
<td>"i"</td>
<td>"PPIS1"</td>
<td>15431</td>
<td>14965.788466</td>
<td>0.908625</td>
<td>…</td>
<td>0.731843</td>
<td>0.677248</td>
<td>0.94832</td>
<td>0.428251</td>
<td>0.42914</td>
</tr>
<tr class="even">
<td>"it"</td>
<td>"PPH1"</td>
<td>12860</td>
<td>12472.298598</td>
<td>0.976747</td>
<td>…</td>
<td>0.936577</td>
<td>0.918503</td>
<td>0.974995</td>
<td>0.196682</td>
<td>0.19709</td>
</tr>
<tr class="odd">
<td>"you"</td>
<td>"PPY"</td>
<td>12448</td>
<td>12072.719514</td>
<td>0.897063</td>
<td>…</td>
<td>0.659539</td>
<td>0.654258</td>
<td>0.941817</td>
<td>0.450321</td>
<td>0.451255</td>
</tr>
<tr class="even">
<td>"is"</td>
<td>"VBZ"</td>
<td>10565</td>
<td>10246.487923</td>
<td>0.969252</td>
<td>…</td>
<td>0.914525</td>
<td>0.891143</td>
<td>0.97051</td>
<td>0.229789</td>
<td>0.230266</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The most commonly used dispersion measure is <strong>Deviation of Proportions (DP)</strong>, which ranges from 0 to 1:</p>
<ul>
<li>DP = 0: Token appears in perfectly equal proportions across all documents</li>
<li>DP = 1: Token appears in only one document</li>
<li>Higher DP = more uneven distribution</li>
</ul>
<p>Let’s compare the DP values for a couple of tokens:</p>
<div id="2a5242a9" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dt.<span class="bu">filter</span>(pl.col(<span class="st">"Token"</span>).is_in([<span class="st">"the"</span>, <span class="st">"data"</span>, <span class="st">"school"</span>])).select([<span class="st">"Token"</span>, <span class="st">"DP"</span>]).head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (3, 2)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Token</th>
<th data-quarto-table-cell-role="th">DP</th>
</tr>
<tr class="odd">
<th>str</th>
<th>f64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"the"</td>
<td>0.143405</td>
</tr>
<tr class="even">
<td>"school"</td>
<td>0.670521</td>
</tr>
<tr class="odd">
<td>"data"</td>
<td>0.844023</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notice how <em>the</em> has very low DP (close to 0), meaning it’s evenly distributed across documents—it’s a true high-frequency word. Compare this to <em>data</em> or <em>school</em>, which may have higher DP values if they cluster in academic texts.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
When Dispersion Matters
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine comparing two corpora: one about climate science and one about cooking. The word <em>heat</em> might appear frequently in both. But in the climate corpus, it might appear in 90% of documents (high dispersion, DP ≈ 0.2), while in the cooking corpus it might appear in only 20% of documents (low dispersion, DP ≈ 0.7)—all the recipes for baking.</p>
<p>This tells us something important: <em>heat</em> is a core term in climate discourse but a specialized term in cooking discourse. Frequency alone wouldn’t reveal this distinction.</p>
</div>
</div>
</section>
<section id="create-a-document-feature-matrix" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="create-a-document-feature-matrix"><span class="header-section-number">4.6</span> Create a document-feature matrix</h2>
<p>So far we’ve looked at individual token frequencies and dispersions. But many text analysis tasks require us to represent entire documents numerically—for clustering, classification, or statistical comparison. This is where <strong>document-feature matrices</strong> (DFMs) come in.</p>
<p>A DFM converts each document into a vector of numbers, where each column represents a feature (like a word or tag) and each cell contains a count. This representation enables mathematical operations on texts.</p>
<p>With our tokens object we can create a DFM using the <code>tags_dtm()</code> function. In this case, our features are POS (part-of-speech) tags rather than individual tokens. Each cell contains a count of how many times that tag appears in that document:</p>
<div id="17ec5161" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dfm <span class="op">=</span> ds.tags_dtm(ds_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check the result:</p>
<div id="fdc84ec5" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dfm.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 178)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">doc_id</th>
<th data-quarto-table-cell-role="th">NN1</th>
<th data-quarto-table-cell-role="th">JJ</th>
<th data-quarto-table-cell-role="th">II</th>
<th data-quarto-table-cell-role="th">AT</th>
<th data-quarto-table-cell-role="th">…</th>
<th data-quarto-table-cell-role="th">RT21</th>
<th data-quarto-table-cell-role="th">NN121</th>
<th data-quarto-table-cell-role="th">NP</th>
<th data-quarto-table-cell-role="th">RGQV32</th>
<th data-quarto-table-cell-role="th">RR41</th>
</tr>
<tr class="odd">
<th>str</th>
<th>u32</th>
<th>u32</th>
<th>u32</th>
<th>u32</th>
<th>…</th>
<th>u32</th>
<th>u32</th>
<th>u32</th>
<th>u32</th>
<th>u32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"acad_01"</td>
<td>451</td>
<td>279</td>
<td>218</td>
<td>182</td>
<td>…</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>"acad_02"</td>
<td>432</td>
<td>276</td>
<td>208</td>
<td>279</td>
<td>…</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>"acad_03"</td>
<td>422</td>
<td>187</td>
<td>167</td>
<td>234</td>
<td>…</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>"acad_04"</td>
<td>469</td>
<td>270</td>
<td>161</td>
<td>206</td>
<td>…</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>"acad_05"</td>
<td>445</td>
<td>201</td>
<td>169</td>
<td>180</td>
<td>…</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The DFM has a column for <code>doc_id</code> and then columns for every POS tag (NN1 = singular noun, JJ = adjective, etc.).</p>
<section id="using-document-feature-matrices" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="using-document-feature-matrices"><span class="header-section-number">4.6.1</span> Using document-feature matrices</h3>
<p>We can use the DFM to calculate document-level statistics. For example, we can get the total word counts for each document by summing across all tag columns:</p>
<div id="b9717f9b" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get total word counts per document</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>doc_totals <span class="op">=</span> dfm.with_columns(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    pl.sum_horizontal(pl.exclude(<span class="st">"doc_id"</span>)).alias(<span class="st">"total"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>).select(<span class="st">"doc_id"</span>, <span class="st">"total"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>doc_totals.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (10, 2)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">doc_id</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th>str</th>
<th>u32</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"acad_01"</td>
<td>2533</td>
</tr>
<tr class="even">
<td>"acad_02"</td>
<td>2558</td>
</tr>
<tr class="odd">
<td>"acad_03"</td>
<td>2531</td>
</tr>
<tr class="even">
<td>"acad_04"</td>
<td>2542</td>
</tr>
<tr class="odd">
<td>"acad_05"</td>
<td>2505</td>
</tr>
<tr class="even">
<td>"acad_06"</td>
<td>2580</td>
</tr>
<tr class="odd">
<td>"acad_07"</td>
<td>2444</td>
</tr>
<tr class="even">
<td>"acad_08"</td>
<td>2538</td>
</tr>
<tr class="odd">
<td>"acad_09"</td>
<td>2554</td>
</tr>
<tr class="even">
<td>"acad_10"</td>
<td>2538</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="aggregating-by-text-type" class="level3" data-number="4.6.2">
<h3 data-number="4.6.2" class="anchored" data-anchor-id="aggregating-by-text-type"><span class="header-section-number">4.6.2</span> Aggregating by text type</h3>
<p>We can use the text-type information embedded in our <code>doc_id</code> values to compare totals across different kinds of texts:</p>
<div id="93742296" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract text type and calculate totals</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>totals <span class="op">=</span> (</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    doc_totals</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"doc_id"</span>).<span class="bu">str</span>.extract(<span class="vs">r"^([a-z]+)"</span>, <span class="dv">1</span>).alias(<span class="st">"text_type"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    .group_by(<span class="st">"text_type"</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    .agg(pl.col(<span class="st">"total"</span>).<span class="bu">sum</span>())</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">"text_type"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can format this as a table using <code>great_tables</code>:</p>
<div id="35e7bbae" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>GT(totals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<div id="tgdwmwchsk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#tgdwmwchsk table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#tgdwmwchsk thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#tgdwmwchsk p { margin: 0; padding: 0; }
 #tgdwmwchsk .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #tgdwmwchsk .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #tgdwmwchsk .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #tgdwmwchsk .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #tgdwmwchsk .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #tgdwmwchsk .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #tgdwmwchsk .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #tgdwmwchsk .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #tgdwmwchsk .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #tgdwmwchsk .gt_column_spanner_outer:first-child { padding-left: 0; }
 #tgdwmwchsk .gt_column_spanner_outer:last-child { padding-right: 0; }
 #tgdwmwchsk .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #tgdwmwchsk .gt_spanner_row { border-bottom-style: hidden; }
 #tgdwmwchsk .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #tgdwmwchsk .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #tgdwmwchsk .gt_from_md> :first-child { margin-top: 0; }
 #tgdwmwchsk .gt_from_md> :last-child { margin-bottom: 0; }
 #tgdwmwchsk .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #tgdwmwchsk .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #tgdwmwchsk .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #tgdwmwchsk .gt_row_group_first td { border-top-width: 2px; }
 #tgdwmwchsk .gt_row_group_first th { border-top-width: 2px; }
 #tgdwmwchsk .gt_striped { color: #333333; background-color: #F4F4F4; }
 #tgdwmwchsk .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #tgdwmwchsk .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #tgdwmwchsk .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #tgdwmwchsk .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #tgdwmwchsk .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #tgdwmwchsk .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #tgdwmwchsk .gt_left { text-align: left; }
 #tgdwmwchsk .gt_center { text-align: center; }
 #tgdwmwchsk .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #tgdwmwchsk .gt_font_normal { font-weight: normal; }
 #tgdwmwchsk .gt_font_bold { font-weight: bold; }
 #tgdwmwchsk .gt_font_italic { font-style: italic; }
 #tgdwmwchsk .gt_super { font-size: 65%; }
 #tgdwmwchsk .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #tgdwmwchsk .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="text_type" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">text_type</th>
<th id="total" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">total</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">acad</td>
<td class="gt_row gt_right">126315</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">blog</td>
<td class="gt_row gt_right">128556</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">fic</td>
<td class="gt_row gt_right">130292</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">mag</td>
<td class="gt_row gt_right">129905</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">news</td>
<td class="gt_row gt_right">128058</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">spok</td>
<td class="gt_row gt_right">129866</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">tvm</td>
<td class="gt_row gt_right">130132</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">web</td>
<td class="gt_row gt_right">127961</td>
</tr>
</tbody>
</table>


</div>
        
</div>
</div>
</section>
</section>
<section id="common-pitfalls" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="common-pitfalls"><span class="header-section-number">4.7</span> Common Pitfalls</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Watch Out For
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Rare Word Illusion</strong>: High-frequency rare words may appear in only one or two documents. Always check dispersion alongside frequency.</p></li>
<li><p><strong>Normalization Matters</strong>: Comparing raw frequencies across corpora of different sizes is misleading. Always normalize (e.g., per million words).</p></li>
<li><p><strong>Function Word Dominance</strong>: The most frequent tokens are rarely the most interesting. Consider filtering or focusing on content words.</p></li>
<li><p><strong>Text Length Variation</strong>: If your corpus has documents of very different lengths, some analyses may be biased toward longer documents.</p></li>
<li><p><strong>Case Sensitivity</strong>: Remember that tokenization decisions (lowercase vs.&nbsp;mixed case) affect frequency counts. Be consistent and document your choices.</p></li>
</ol>
</div>
</div>
</section>
<section id="discussion-questions" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="discussion-questions"><span class="header-section-number">4.8</span> Discussion Questions</h2>
<ol type="1">
<li><p><strong>Interpreting Zipf’s Law</strong>: What does the power-law distribution of token frequencies suggest about language use? How might this pattern differ in specialized vs.&nbsp;general corpora?</p></li>
<li><p><strong>Frequency vs.&nbsp;Importance</strong>: The most frequent words are function words (articles, prepositions). What does this tell us about using frequency as a proxy for “importance”? When might frequency be misleading?</p></li>
<li><p><strong>Dispersion and Interpretation</strong>: Why might a moderately frequent word with high dispersion be more interesting than a high-frequency word with low dispersion? Think of examples from your research area.</p></li>
<li><p><strong>Document Length Effects</strong>: How might varying document lengths in your corpus affect frequency and dispersion measures? What steps could you take to account for this?</p></li>
<li><p><strong>Beyond Single Tokens</strong>: This tutorial focuses on individual word frequencies. What might we miss by not considering multi-word expressions, collocations, or n-grams?</p></li>
<li><p><strong>Critical Reflection</strong>: Frequency tables reduce texts to counts, discarding context, order, and meaning. What are the trade-offs of this reductionist approach? When is it appropriate, and when might it be problematic?</p></li>
</ol>
</section>
<section id="key-takeaways" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">4.9</span> Key Takeaways</h2>
<ul>
<li><strong>Frequency tables</strong> provide a foundation for corpus analysis, showing how often tokens appear</li>
<li><strong>Zipf’s Law</strong> describes the power-law distribution where a few tokens dominate and most are rare</li>
<li><strong>Dispersion measures</strong> like DP help distinguish between tokens that are evenly distributed vs.&nbsp;clustered in a few documents</li>
<li><strong>Document-feature matrices</strong> convert texts into numerical representations for further analysis</li>
<li><strong>Normalization</strong> (e.g., to per-million-word rates) is essential for comparing corpora of different sizes</li>
<li><strong>Context matters</strong>: Raw frequency counts should always be interpreted in light of corpus composition, text length variation, and research questions</li>
</ul>
</section>
<section id="further-reading" class="level2" data-number="4.10">
<h2 data-number="4.10" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">4.10</span> Further Reading</h2>
<ul>
<li>Brezina, V. (2018). <em>Statistics in Corpus Linguistics: A Practical Guide</em>. Chapter 3: Frequency.</li>
<li>Gries, S. Th. (2008). “Dispersions and adjusted frequencies in corpora.” <em>International Journal of Corpus Linguistics</em> 13(4): 403-437.</li>
<li>Zipf, G. K. (1935). <em>The Psycho-Biology of Language</em>. Houghton, Mifflin.</li>
</ul>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ready to Practice?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Head to <a href="../mini_labs/Mini_Lab_03_Frequencies.ipynb">Mini Lab 03: Frequencies</a> to apply these concepts hands-on. You’ll work with the same corpus and functions, but with opportunities to explore different tokens, create visualizations, and experiment with filtering and aggregation techniques.</p>
<p>The mini lab includes experimentation prompts to help you develop intuitions about when frequency and dispersion measures are most useful in text analysis.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../tutorials/spacy-basics.html" class="pagination-link" aria-label="NLP Processing with spaCy">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">NLP Processing with spaCy</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../tutorials/keyness.html" class="pagination-link" aria-label="Keyness">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Keyness</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/browndw/humanities_analytics/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>